<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>DAFT - v1.0.0</title><meta name="description" content="Documentation for DAFT"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">DAFT - v1.0.0</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>DAFT - v1.0.0</h1></div><div class="tsd-panel tsd-typography"><h1 id="daft-declarative-agents-fast--type-safe" class="tsd-anchor-link">DAFT - Declarative Agents, Fast &amp; Type-safe<a href="#daft-declarative-agents-fast--type-safe" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://github.com/JoshuaSkootsky/daft/actions/workflows/test.yml"><img src="https://github.com/JoshuaSkootsky/daft/actions/workflows/test.yml/badge.svg" alt="CI"></a>
<a href="https://joshuaskootsky.github.io/daft/"><img src="https://img.shields.io/badge/API-Docs-blue" alt="API Docs"></a></p>
<p>A declarative framework for describing iterative AI agent workflows in TypeScript.</p>
<p><strong>ğŸ“š <a href="https://joshuaskootsky.github.io/daft/">Full API Documentation</a></strong></p>
<h2 id="quick-start" class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> </span><span class="hl-2">https://github.com/JoshuaSkootsky/daft.git</span><span class="hl-1"> &amp;&amp; </span><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">daft</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">echo</span><span class="hl-1"> </span><span class="hl-2">&#39;ZEN_API_KEY=your_key_here&#39;</span><span class="hl-1"> &gt; </span><span class="hl-2">.env</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">run-local</span><span class="hl-1"> </span><span class="hl-2">examples/linear-spec.ts</span><br/><span class="hl-3"># âœ… Done in 4 iterations</span>
</code><button type="button">Copy</button></pre>

<p><strong>DAFT</strong> lets you describe <em>what</em> your data should look like; agents iterate until it does.</p>
<h2 id="what-is-daft" class="tsd-anchor-link">What Is DAFT?<a href="#what-is-daft" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>DAFT is a declarative DSL for LLM workflows. You define structure; runtime handles execution.</p>
<ul>
<li><strong>Spec = Declarative DAG</strong> (what to do)</li>
<li><strong>Tool = Imperative logic</strong> (how to do it)</li>
<li><strong>Predicate = Stop condition</strong> (when to finish)</li>
</ul>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">until</span><span class="hl-1">: </span><span class="hl-2">&#39;hasSummary&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">maxIter</span><span class="hl-1">: </span><span class="hl-5">5</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tools</span><span class="hl-1">: [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">dependsOn</span><span class="hl-1">: [</span><span class="hl-2">&#39;extract&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Why DAFT?</strong></p>
<p><strong>Narrow surface</strong> â†’ Fast learning curve. Vocabulary: <code>steps</code>, <code>until</code>, <code>tools</code>, <code>budget</code></p>
<p><strong>Declarative</strong> â†’ Static analysis. Cycle detection, cost estimation, auto-mocking</p>
<p><strong>Type-safe</strong> â†’ Build-time validation. TypeScript rejects misspelled predicates</p>
<p><strong>Upgrade path</strong> â†’ Complex logic in tools; DSL stays honest</p>
<h2 id="dag-execution" class="tsd-anchor-link">DAG Execution<a href="#dag-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-1">    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-1">    â”‚ </span><span class="hl-6">cheap_summary</span><span class="hl-1">â”‚</span><br/><span class="hl-1">    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜</span><br/><span class="hl-1">           â”‚</span><br/><span class="hl-1">       â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-1">       â–¼         â–¼          â–¼</span><br/><span class="hl-1">   â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-1">   â”‚</span><span class="hl-6">keywords</span><span class="hl-1">â”‚ â”‚</span><span class="hl-6">deep_</span><span class="hl-1">  â”‚  â”‚ </span><span class="hl-6">risks</span><span class="hl-1"> â”‚</span><br/><span class="hl-1">   â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜</span><br/><span class="hl-1">       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br/><span class="hl-1">                  â”‚</span><br/><span class="hl-1">                  â–¼</span><br/><span class="hl-1">             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-1">             â”‚ </span><span class="hl-6">report</span><span class="hl-1"> â”‚</span><br/><span class="hl-1">             â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code><button>Copy</button></pre>

<h2 id="stack-budget" class="tsd-anchor-link">Stack &amp; Budget<a href="#stack-budget" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><strong>Built with Bun + Redis:</strong> Fast runtime, native TypeScript, distributed execution</p>
<pre><code class="typescript"><span class="hl-4">budget</span><span class="hl-1">: { </span><span class="hl-4">maxTime</span><span class="hl-1">: </span><span class="hl-5">45000</span><span class="hl-1">, </span><span class="hl-4">maxTokens</span><span class="hl-1">: </span><span class="hl-5">4000</span><span class="hl-1">, </span><span class="hl-4">maxCost</span><span class="hl-1">: </span><span class="hl-5">0.25</span><span class="hl-1"> }</span>
</code><button type="button">Copy</button></pre>

<p>Fail-fast when limits are hit. Zero surprise costs.</p>
<h2 id="examples" class="tsd-anchor-link">Examples<a href="#examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>v1-showcase.ts</strong> - Earnings analysis (45s, $0.25)</li>
<li><strong>v2-showcase.ts</strong> - Multi-pass code review</li>
<li><strong>linear-spec.ts</strong> - Basic workflow</li>
<li><strong>dag-spec.ts</strong> - Parallel execution</li>
<li><strong>llm-spec.ts</strong> - Budget constraints</li>
<li><strong>integration-spec.ts</strong> - Multiple tools</li>
</ul>
<h2 id="core-concepts" class="tsd-anchor-link">Core Concepts<a href="#core-concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="spec" class="tsd-anchor-link">Spec<a href="#spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Declarative workflow definition:</p>
<pre><code class="typescript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-6">predicates</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../src/tools/predicates&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-6">tools</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../src/tools&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-7">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">initial:</span><span class="hl-1"> { </span><span class="hl-6">text:</span><span class="hl-1"> </span><span class="hl-2">&quot;Hello&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-6">steps:</span><span class="hl-1"> [{</span><br/><span class="hl-1">    </span><span class="hl-6">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">maxIter:</span><span class="hl-1"> </span><span class="hl-5">5</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">  }]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="predicates" class="tsd-anchor-link">Predicates<a href="#predicates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Determine when a step should stop iterating: <code>hasSummary</code>, <code>hasKeywords</code>, <code>scoreCheck</code></p>
<h3 id="tools" class="tsd-anchor-link">Tools<a href="#tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tools contain imperative logic. Use built-in (<code>llm</code>, <code>mockLLM</code>) or create custom:</p>
<pre><code class="typescript"><span class="hl-7">export</span><span class="hl-1"> </span><span class="hl-8">const</span><span class="hl-1"> </span><span class="hl-9">myTool</span><span class="hl-1"> = </span><span class="hl-0">defineTool</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">input:</span><span class="hl-1"> {} </span><span class="hl-7">as</span><span class="hl-1"> { </span><span class="hl-6">items</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">[] },</span><br/><span class="hl-1">  </span><span class="hl-6">output:</span><span class="hl-1"> {} </span><span class="hl-7">as</span><span class="hl-1"> { </span><span class="hl-6">count</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-0">run</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-8">async</span><span class="hl-1"> ({ </span><span class="hl-6">items</span><span class="hl-1"> }) </span><span class="hl-8">=&gt;</span><span class="hl-1"> ({ </span><span class="hl-6">count:</span><span class="hl-1"> </span><span class="hl-6">items</span><span class="hl-1">.</span><span class="hl-6">length</span><span class="hl-1"> })</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="mockllm-pattern" class="tsd-anchor-link">MockLLM Pattern<a href="#mockllm-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Define mock behavior inline for cost-free testing:</p>
<pre><code class="typescript"><span class="hl-4">initial</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-4">_mock</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-4">summary</span><span class="hl-1">: { </span><span class="hl-4">summary</span><span class="hl-1">: </span><span class="hl-2">&#39;Quick overview...&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">keywords</span><span class="hl-1">: { </span><span class="hl-4">keywords</span><span class="hl-1">: [</span><span class="hl-2">&#39;AI&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;data&#39;</span><span class="hl-1">] }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>When <code>ZEN_API_KEY</code> is set, steps use real LLM. When unset, mockLLM returns <code>_mock</code> data.</p>
<h2 id="custom-tools-escape-hatch" class="tsd-anchor-link">Custom Tools (Escape Hatch)<a href="#custom-tools-escape-hatch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Keep DSL honestâ€”complex logic lives in tools, not spec. Create, register in <code>src/tools/index.ts</code>, and use:</p>
<pre><code class="ts"><span class="hl-1">{ </span><span class="hl-4">name</span><span class="hl-1">: </span><span class="hl-2">&#39;count&#39;</span><span class="hl-1">, </span><span class="hl-4">until</span><span class="hl-1">: </span><span class="hl-2">&#39;hasField&#39;</span><span class="hl-1">, </span><span class="hl-4">tools</span><span class="hl-1">: [</span><span class="hl-2">&#39;myTool&#39;</span><span class="hl-1">] }</span>
</code><button type="button">Copy</button></pre>

<p>No <code>if</code>, <code>for</code>, or expressions in specâ€”declarative structure + imperative tools.</p>
<h2 id="learn-more" class="tsd-anchor-link">Learn More<a href="#learn-more" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://joshuaskootsky.github.io/daft/">Full API Docs</a> â€¢ <a href="media/examples">Examples</a> â€¢ <a href="media/LICENSE">MIT License</a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#daft-declarative-agents-fast--type-safe"><span>DAFT -<wbr/> <wbr/>Declarative <wbr/>Agents, <wbr/>Fast &amp; <wbr/>Type-<wbr/>safe</span></a><ul><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#what-is-daft"><span>What <wbr/>Is <wbr/>DAFT?</span></a></li><li><a href="#dag-execution"><span>DAG <wbr/>Execution</span></a></li><li><a href="#stack-budget"><span>Stack &amp; <wbr/>Budget</span></a></li><li><a href="#examples"><span>Examples</span></a></li><li><a href="#core-concepts"><span>Core <wbr/>Concepts</span></a></li><li><ul><li><a href="#spec"><span>Spec</span></a></li><li><a href="#predicates"><span>Predicates</span></a></li><li><a href="#tools"><span>Tools</span></a></li><li><a href="#mockllm-pattern"><span>Mock<wbr/>LLM <wbr/>Pattern</span></a></li></ul></li><li><a href="#custom-tools-escape-hatch"><span>Custom <wbr/>Tools (<wbr/>Escape <wbr/>Hatch)</span></a></li><li><a href="#learn-more"><span>Learn <wbr/>More</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">DAFT - v1.0.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
