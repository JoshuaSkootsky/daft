<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>DAFT - v1.0.0</title><meta name="description" content="Documentation for DAFT"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">DAFT - v1.0.0</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>DAFT - v1.0.0</h1></div><div class="tsd-panel tsd-typography"><h1 id="daft-declarative-agents-fast--type-safe" class="tsd-anchor-link">DAFT - Declarative Agents, Fast &amp; Type-safe<a href="#daft-declarative-agents-fast--type-safe" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://github.com/JoshuaSkootsky/daft/actions/workflows/test.yml"><img src="https://github.com/JoshuaSkootsky/daft/actions/workflows/test.yml/badge.svg" alt="CI"></a></p>
<p>A declarative framework for describing iterative AI agent workflows in TypeScript.</p>
<h1 id="daft-declarative-agents-fast--type-safe-1" class="tsd-anchor-link">DAFT – Declarative Agents, Fast &amp; Type-safe<a href="#daft-declarative-agents-fast--type-safe-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><pre><code class="bash"><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">clone</span><span class="hl-1"> &lt;</span><span class="hl-2">rep</span><span class="hl-1">o&gt; &amp;&amp; </span><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">daft</span><br/><span class="hl-0">echo</span><span class="hl-1"> </span><span class="hl-2">&#39;ZEN_API_KEY=xxx&#39;</span><span class="hl-1"> &gt; </span><span class="hl-2">.env</span><br/><span class="hl-0">./run.sh</span><span class="hl-1"> </span><span class="hl-2">examples/enrichment.json</span><br/><span class="hl-3"># ✅ Done in 4 iterations – { summary: &quot;...&quot;, entities: [...] }</span>
</code><button type="button">Copy</button></pre>

<p><strong>DAFT</strong> lets you describe <em>what</em> your data should look like; agents iterate until it does.</p>
<p>DAFT is Declarative Agent Framework Tooling</p>
<p>Control flow is data.</p>
<p>The “plan” is a DAG (or even a single declarative object) that the runtime interprets.</p>
<p>Users never write for (pass = 1; pass ≤ max; pass++); they write:</p>
<pre><code><span class="hl-1">	</span><span class="hl-4">steps</span><span class="hl-1">: [{ </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-5">schema</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">, </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">, </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&quot;llm&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;google-search&quot;</span><span class="hl-1">] }]</span>
</code><button>Copy</button></pre>

<p>The engine decides parallelism, retry, back-off, etc.</p>
<p>Concepts in 3 Bullets</p>
<ol>
<li>
<p>Iterative enrichment – each step adds fields until a predicate passes.</p>
</li>
<li>
<p>DAG parallelism – steps run as soon as their dependencies are satisfied.</p>
</li>
<li>
<p>Built-in budgets – time, tokens, dollars; fail-fast when exceeded.</p>
</li>
</ol>
<h3 id="run-your-first-spec" class="tsd-anchor-link">Run Your First Spec<a href="#run-your-first-spec" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># Test with example data</span><br/><span class="hl-0">./run.sh</span><span class="hl-1"> </span><span class="hl-2">examples/linear-spec.ts</span><span class="hl-1"> </span><span class="hl-2">examples/data.json</span>
</code><button type="button">Copy</button></pre>

<p><strong>Output</strong>:</p>
<pre><code><span class="hl-5">Type</span><span class="hl-1">-</span><span class="hl-5">checking</span><span class="hl-1"> </span><span class="hl-5">examples</span><span class="hl-1">/</span><span class="hl-5">linear</span><span class="hl-1">-</span><span class="hl-5">spec</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">...</span><br/><span class="hl-1">✓ </span><span class="hl-5">Type</span><span class="hl-1">-</span><span class="hl-5">check</span><span class="hl-1"> </span><span class="hl-5">passed</span><br/><br/><span class="hl-5">Executing</span><span class="hl-1"> </span><span class="hl-5">spec</span><span class="hl-1"> </span><span class="hl-5">locally</span><span class="hl-1">...</span><br/><span class="hl-1">  [</span><span class="hl-5">analyze</span><span class="hl-1">] </span><span class="hl-5">Iteration</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1">: </span><span class="hl-5">No</span><span class="hl-1"> </span><span class="hl-5">analysis</span><span class="hl-1"> </span><span class="hl-5">found</span><br/><span class="hl-1">  [</span><span class="hl-5">analyze</span><span class="hl-1">] </span><span class="hl-5">Iteration</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">: </span><span class="hl-5">Complete</span><br/><span class="hl-1">  [</span><span class="hl-5">score</span><span class="hl-1">] </span><span class="hl-5">Iteration</span><span class="hl-1"> </span><span class="hl-6">1</span><span class="hl-1">: </span><span class="hl-5">Score</span><span class="hl-1"> </span><span class="hl-6">75</span><span class="hl-1"> &lt; </span><span class="hl-6">80</span><br/><span class="hl-1">  [</span><span class="hl-5">score</span><span class="hl-1">] </span><span class="hl-5">Iteration</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">: </span><span class="hl-5">Score</span><span class="hl-1"> </span><span class="hl-6">82</span><span class="hl-1"> &gt;= </span><span class="hl-6">80</span><span class="hl-1"> ✓</span><br/><br/><span class="hl-1">✅ </span><span class="hl-5">Done</span><span class="hl-1"> </span><span class="hl-7">in</span><span class="hl-1"> </span><span class="hl-6">4</span><span class="hl-1"> </span><span class="hl-5">iterations</span><br/><span class="hl-4">Result</span><span class="hl-1">: {</span><span class="hl-2">&quot;text&quot;</span><span class="hl-1">:</span><span class="hl-2">&quot;Example input data&quot;</span><span class="hl-1">,</span><span class="hl-2">&quot;code&quot;</span><span class="hl-1">:</span><span class="hl-2">&quot;function example() { return 42; }&quot;</span><span class="hl-1">,</span><span class="hl-2">&quot;score&quot;</span><span class="hl-1">:</span><span class="hl-6">82</span><span class="hl-1">,</span><span class="hl-2">&quot;analysis&quot;</span><span class="hl-1">:</span><span class="hl-2">&quot;complete&quot;</span><span class="hl-1">}</span><br/><br/><span class="hl-4">Usage</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-4">Tokens</span><span class="hl-1">: </span><span class="hl-6">0</span><br/><span class="hl-1">  </span><span class="hl-4">Cost</span><span class="hl-1">: </span><span class="hl-5">$0</span><span class="hl-1">.</span><span class="hl-6">0000</span><br/><span class="hl-1">  </span><span class="hl-4">Duration</span><span class="hl-1">: 0.0</span><span class="hl-5">s</span>
</code><button>Copy</button></pre>

<h2 id="concepts" class="tsd-anchor-link">Concepts<a href="#concepts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="iterative-data-enrichment" class="tsd-anchor-link">Iterative Data Enrichment<a href="#iterative-data-enrichment" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>DAFT excels at iteratively enriching data through multiple steps, where each step adds new information to the data object. The result is progressively richer data that accumulates insights.</p>
<p><strong>Example</strong> (<code>examples/enrichment.ts</code>):</p>
<pre><code class="typescript"><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">initial:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">document:</span><span class="hl-1"> </span><span class="hl-2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-5">steps:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,     </span><span class="hl-3">// Step 1: Adds summary field</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;extract_entities&#39;</span><span class="hl-1">,   </span><span class="hl-3">// Step 2: Depends on summarize, adds entities</span><br/><span class="hl-1">      </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;truthy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;categorize&#39;</span><span class="hl-1">,           </span><span class="hl-3">// Step 3: Depends on entities, adds category</span><br/><span class="hl-1">      </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;extract_entities&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;truthy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p><strong>After execution</strong>:</p>
<pre><code class="javascript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-4">document</span><span class="hl-1">: </span><span class="hl-2">&quot;The quick brown fox jumps over the lazy dog.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">summary</span><span class="hl-1">: </span><span class="hl-2">&quot;Brief summary of the document...&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">entities</span><span class="hl-1">: [</span><span class="hl-2">&quot;fox&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;dog&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;jumping&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">category</span><span class="hl-1">: </span><span class="hl-2">&quot;Animals&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Each step:</p>
<ol>
<li><strong>Accumulates context</strong> from previous steps via <code>dependsOn</code></li>
<li><strong>Adds new fields</strong> through tool execution</li>
<li><strong>Continues until predicate satisfied</strong> (e.g., field exists, condition met)</li>
</ol>
<p>This pattern enables complex data pipelines: extract → transform → enrich → validate.</p>
<h3 id="examples-overview" class="tsd-anchor-link">Examples Overview<a href="#examples-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>DAFT includes several example specs demonstrating different patterns:</p>
<ul>
<li><strong>linear-spec.ts</strong> - Basic linear workflow with echo tool</li>
<li><strong>dag-spec.ts</strong> - Parallel steps with dependencies</li>
<li><strong>llm-spec.ts</strong> - LLM tool usage with hasOutput predicate</li>
<li><strong>integration-spec.ts</strong> - Combines LLM and echo tools</li>
<li><strong>enrichment-example.ts</strong> - Demonstrates iterative data enrichment pattern</li>
<li><strong>budget-spec.ts</strong> - Budget enforcement (time/token limits)</li>
</ul>
<p><strong>All examples have been tested and verified working.</strong></p>
<h3 id="specs" class="tsd-anchor-link">Specs<a href="#specs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A <strong>spec</strong> declares WHAT should happen, not HOW:</p>
<pre><code class="typescript"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-5">predicates</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../src/tools/predicates&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-5">tools</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../src/tools&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">initial:</span><span class="hl-1"> { </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">&quot;Hello&quot;</span><span class="hl-1"> },  </span><span class="hl-3">// Starting data</span><br/><span class="hl-1">  </span><span class="hl-5">steps:</span><span class="hl-1"> [                      </span><span class="hl-3">// Declarative workflow</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,     </span><span class="hl-3">// Predicate name (when to stop)</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">,              </span><span class="hl-3">// Max iterations</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]            </span><span class="hl-3">// Tools to run</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="predicates" class="tsd-anchor-link">Predicates<a href="#predicates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Predicates</strong> determine when a step is complete:</p>
<pre><code class="typescript"><span class="hl-3">// Built-in predicate</span><br/><span class="hl-4">until</span><span class="hl-1">: </span><span class="hl-2">&#39;analyzeDone&#39;</span><br/><br/><span class="hl-3">// Custom predicate</span><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-9">predicates</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">myCustom</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">ok:</span><span class="hl-1"> </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">myField</span><span class="hl-1"> === </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">msg:</span><span class="hl-1"> </span><span class="hl-2">&#39;My field not complete&#39;</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="tools" class="tsd-anchor-link">Tools<a href="#tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Tools</strong> are the actions that transform data:</p>
<pre><code class="typescript"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-5">defineTool</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../src/tools&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">tools</span><span class="hl-1">.</span><span class="hl-5">myTool</span><span class="hl-1"> = </span><span class="hl-0">defineTool</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;myTool&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">input:</span><span class="hl-1"> {} </span><span class="hl-8">as</span><span class="hl-1"> { </span><span class="hl-5">query</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">output:</span><span class="hl-1"> {} </span><span class="hl-8">as</span><span class="hl-1"> { </span><span class="hl-5">result</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;My custom tool&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">run</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> { </span><span class="hl-5">output:</span><span class="hl-1"> </span><span class="hl-2">`Result: </span><span class="hl-7">${</span><span class="hl-5">input</span><span class="hl-11">.</span><span class="hl-5">query</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1"> };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h3 id="dag-execution" class="tsd-anchor-link">DAG Execution<a href="#dag-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Steps with <code>dependsOn</code> run in parallel (when deps are satisfied):</p>
<pre><code class="typescript"><span class="hl-4">steps</span><span class="hl-1">: [</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">],  </span><span class="hl-3">// Waits for analyze</span><br/><span class="hl-1">    </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  {</span><br/><span class="hl-1">    </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;translate&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">],  </span><span class="hl-3">// Waits for summarize</span><br/><span class="hl-1">    </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;truthy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">]</span>
</code><button type="button">Copy</button></pre>

<p><code>analyze</code> → <code>summarize</code> (parallel with nothing, waits for analyze) → <code>translate</code></p>
<h2 id="built-in-predicates" class="tsd-anchor-link">Built-in Predicates<a href="#built-in-predicates" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>alwaysTrue</code> - Always succeeds</li>
<li><code>analyzeDone</code> - Checks if <code>analysis</code> field exists</li>
<li><code>scoreCheck</code> - Checks if <code>score &gt;= 80</code></li>
<li><code>truthy</code> - Checks if value is truthy</li>
</ul>
<h2 id="built-in-tools" class="tsd-anchor-link">Built-in Tools<a href="#built-in-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>llm</code> - Calls OpenCode Zen LLM (requires <code>ZEN_API_KEY</code>)</li>
<li><code>echo</code> - Adds analysis field and increments score (for testing)</li>
</ul>
<h2 id="cli-commands" class="tsd-anchor-link">CLI Commands<a href="#cli-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="quick-test" class="tsd-anchor-link">Quick Test<a href="#quick-test" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># With data file</span><br/><span class="hl-0">./run.sh</span><span class="hl-1"> </span><span class="hl-2">examples/linear-spec.ts</span><span class="hl-1"> </span><span class="hl-2">examples/data.json</span><br/><br/><span class="hl-3"># Without data (uses spec&#39;s initial)</span><br/><span class="hl-0">./run.sh</span><span class="hl-1"> </span><span class="hl-2">examples/dag-spec.ts</span>
</code><button type="button">Copy</button></pre>

<h3 id="submit-to-redis-distributed" class="tsd-anchor-link">Submit to Redis (distributed)<a href="#submit-to-redis-distributed" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-3"># Terminal 1: Start worker</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">worker</span><br/><br/><span class="hl-3"># Terminal 2: Submit job</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">submit</span><span class="hl-1"> </span><span class="hl-2">examples/linear-spec.ts</span><br/><br/><span class="hl-3"># Terminal 3: View logs</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">logs</span><br/><br/><span class="hl-3"># Clean up stale workers (if needed)</span><br/><span class="hl-0">bun</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">cleanup</span>
</code><button type="button">Copy</button></pre>

<p><strong>⚠️ Important:</strong> Always run <code>bun run cleanup</code> before starting new worker processes during development to ensure clean state and avoid conflicts.</p>
<h2 id="adding-custom-predicates-tools" class="tsd-anchor-link">Adding Custom Predicates &amp; Tools<a href="#adding-custom-predicates-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="add-predicate-10-lines" class="tsd-anchor-link">Add Predicate (&lt; 10 lines)<a href="#add-predicate-10-lines" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// src/tools/predicates.ts</span><br/><span class="hl-8">import</span><span class="hl-1"> </span><span class="hl-8">type</span><span class="hl-1"> { </span><span class="hl-5">Predicate</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../lib/types&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-9">predicates</span><span class="hl-1">: </span><span class="hl-10">Record</span><span class="hl-1">&lt;</span><span class="hl-10">string</span><span class="hl-1">, </span><span class="hl-10">Predicate</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-3">// ... existing predicates ...</span><br/><br/><span class="hl-1">  </span><span class="hl-0">myCustom</span><span class="hl-5">:</span><span class="hl-1"> (</span><span class="hl-5">data</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-9">complete</span><span class="hl-1"> = </span><span class="hl-5">data</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">myField</span><span class="hl-1"> === </span><span class="hl-2">&#39;complete&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">ok:</span><span class="hl-1"> </span><span class="hl-5">complete</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">msg:</span><span class="hl-1"> </span><span class="hl-5">complete</span><span class="hl-1"> ? </span><span class="hl-7">undefined</span><span class="hl-1"> : </span><span class="hl-2">&#39;My field not complete&#39;</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="add-tool-10-lines" class="tsd-anchor-link">Add Tool (&lt; 10 lines)<a href="#add-tool-10-lines" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// src/tools/index.ts</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-5">defineTool</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./lib/types&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-9">tools</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-3">// ... existing tools ...</span><br/><br/><span class="hl-1">  </span><span class="hl-5">myTool:</span><span class="hl-1"> </span><span class="hl-0">defineTool</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;myTool&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">input:</span><span class="hl-1"> {} </span><span class="hl-8">as</span><span class="hl-1"> { </span><span class="hl-5">query</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-5">output:</span><span class="hl-1"> {} </span><span class="hl-8">as</span><span class="hl-1"> { </span><span class="hl-5">result</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-2">&#39;My custom tool&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">run</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> { </span><span class="hl-5">output:</span><span class="hl-1"> </span><span class="hl-2">`Processed: </span><span class="hl-7">${</span><span class="hl-5">input</span><span class="hl-11">.</span><span class="hl-5">query</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1"> };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  })</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h2 id="spec-examples" class="tsd-anchor-link">Spec Examples<a href="#spec-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="linear-workflow" class="tsd-anchor-link">Linear Workflow<a href="#linear-workflow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">initial:</span><span class="hl-1"> { </span><span class="hl-5">code:</span><span class="hl-1"> </span><span class="hl-2">&quot;function foo() {}&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">steps:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;enhance&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;scoreCheck&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="dag-workflow-parallelism" class="tsd-anchor-link">DAG Workflow (parallelism)<a href="#dag-workflow-parallelism" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">initial:</span><span class="hl-1"> { </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">&quot;Hello World&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">steps:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">3</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;translate&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">dependsOn:</span><span class="hl-1"> [</span><span class="hl-2">&#39;summarize&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;truthy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h3 id="with-budget" class="tsd-anchor-link">With Budget<a href="#with-budget" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-8">default</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">initial:</span><span class="hl-1"> { </span><span class="hl-5">text:</span><span class="hl-1"> </span><span class="hl-2">&quot;Hello&quot;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-5">budget:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">maxTime:</span><span class="hl-1"> </span><span class="hl-6">60000</span><span class="hl-1">,      </span><span class="hl-3">// 60 seconds</span><br/><span class="hl-1">    </span><span class="hl-5">maxTokens:</span><span class="hl-1"> </span><span class="hl-6">10000</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">maxCost:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">           </span><span class="hl-3">// $5 max</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-5">steps:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyze&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">until:</span><span class="hl-1"> </span><span class="hl-2">&#39;analyzeDone&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">maxIter:</span><span class="hl-1"> </span><span class="hl-6">5</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">tools:</span><span class="hl-1"> [</span><span class="hl-2">&#39;llm&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<h2 id="architecture" class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-5">User</span><span class="hl-1"> </span><span class="hl-5">Spec</span><span class="hl-1"> → </span><span class="hl-5">Validator</span><span class="hl-1"> → </span><span class="hl-5">DAGExecutor</span><span class="hl-1"> → </span><span class="hl-5">Tool</span><span class="hl-1"> </span><span class="hl-5">Registry</span><span class="hl-1"> → </span><span class="hl-5">Redis</span><span class="hl-1">/</span><span class="hl-5">Direct</span><br/><span class="hl-1">                      ↓</span><br/><span class="hl-1">                </span><span class="hl-5">Topological</span><span class="hl-1"> </span><span class="hl-5">Sort</span><br/><span class="hl-1">                      ↓</span><br/><span class="hl-1">                </span><span class="hl-5">Concurrency</span><span class="hl-1"> </span><span class="hl-5">Control</span><br/><span class="hl-1">                      ↓</span><br/><span class="hl-1">                </span><span class="hl-5">Budget</span><span class="hl-1"> </span><span class="hl-5">Enforcement</span>
</code><button>Copy</button></pre>

<h2 id="file-structure" class="tsd-anchor-link">File Structure<a href="#file-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-5">daft</span><span class="hl-1">/</span><br/><span class="hl-1">├── </span><span class="hl-5">src</span><span class="hl-1">/</span><br/><span class="hl-1">│   ├── </span><span class="hl-5">lib</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-5">types</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">       # </span><span class="hl-5">Core</span><span class="hl-1"> </span><span class="hl-5">types</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-5">runtime</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">     # </span><span class="hl-5">DAGExecutor</span><br/><span class="hl-1">│   │   └── </span><span class="hl-5">serializer</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1"> # </span><span class="hl-5">Spec</span><span class="hl-1"> ↔ </span><span class="hl-9">JSON</span><br/><span class="hl-1">│   ├── </span><span class="hl-5">tools</span><span class="hl-1">/</span><br/><span class="hl-1">│   │   ├── </span><span class="hl-5">index</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">       # </span><span class="hl-5">Tool</span><span class="hl-1"> </span><span class="hl-5">definitions</span><br/><span class="hl-1">│   │   └── </span><span class="hl-5">predicates</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">  # </span><span class="hl-5">Predicate</span><span class="hl-1"> </span><span class="hl-5">definitions</span><br/><span class="hl-1">│   └── </span><span class="hl-5">cli</span><span class="hl-1">/</span><br/><span class="hl-1">│       ├── </span><span class="hl-5">submit</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">       # </span><span class="hl-5">Submit</span><span class="hl-1"> </span><span class="hl-5">to</span><span class="hl-1"> </span><span class="hl-5">Redis</span><br/><span class="hl-1">│       ├── </span><span class="hl-5">worker</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">       # </span><span class="hl-5">Worker</span><span class="hl-1"> </span><span class="hl-5">process</span><br/><span class="hl-1">│       ├── </span><span class="hl-5">logs</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">        # </span><span class="hl-5">View</span><span class="hl-1"> </span><span class="hl-5">results</span><span class="hl-1">/</span><span class="hl-5">errors</span><br/><span class="hl-1">│       └── </span><span class="hl-5">run</span><span class="hl-1">-</span><span class="hl-5">local</span><span class="hl-1">.</span><span class="hl-5">ts</span><span class="hl-1">   # </span><span class="hl-5">Local</span><span class="hl-1"> </span><span class="hl-5">execution</span><br/><span class="hl-1">├── </span><span class="hl-5">examples</span><span class="hl-1">/</span><br/><span class="hl-1">│   ├── </span><span class="hl-5">linear</span><span class="hl-1">-</span><span class="hl-5">spec</span><span class="hl-1">.</span><span class="hl-5">ts</span><br/><span class="hl-1">│   ├── </span><span class="hl-5">dag</span><span class="hl-1">-</span><span class="hl-5">spec</span><span class="hl-1">.</span><span class="hl-5">ts</span><br/><span class="hl-1">│   └── </span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">json</span><br/><span class="hl-1">├── </span><span class="hl-5">run</span><span class="hl-1">.</span><span class="hl-5">sh</span><span class="hl-1">                 # </span><span class="hl-5">Quick</span><span class="hl-1"> </span><span class="hl-5">test</span><span class="hl-1"> </span><span class="hl-5">runner</span><br/><span class="hl-1">└── </span><span class="hl-9">README</span><span class="hl-1">.</span><span class="hl-5">md</span>
</code><button>Copy</button></pre>

<h2 id="limitations-v1" class="tsd-anchor-link">Limitations (v1)<a href="#limitations-v1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>No diff tracking (planned for v2)</li>
<li>No web UI (console only)</li>
<li>No custom tool registry (must be in image)</li>
<li>No distributed tracing (planned for v2)</li>
</ul>
<h2 id="remote-redis-coordination" class="tsd-anchor-link">Remote Redis Coordination<a href="#remote-redis-coordination" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Redis-using CLI commands use this pattern:</p>
<pre><code class="sh"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">redis</span><span class="hl-1"> </span><span class="hl-2">=</span><span class="hl-1"> </span><span class="hl-2">new</span><span class="hl-1"> </span><span class="hl-2">RedisClient</span><span class="hl-1">(</span><span class="hl-0">process.env.REDIS_URL</span><span class="hl-1"> || </span><span class="hl-0">&#39;redis://localhost:6379&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>Just set REDIS_URL to your remote Redis instance:</p>
<p>In .env file:
REDIS_URL=redis://your-redis-host:6379</p>
<h1 id="or-with-authentication" class="tsd-anchor-link">Or with authentication<a href="#or-with-authentication" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>REDIS_URL=redis://username:password@your-redis-host:6379</p>
<h1 id="or-with-tls" class="tsd-anchor-link">Or with TLS<a href="#or-with-tls" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>REDIS_URL=rediss://your-redis-host:6379</p>
<h3 id="benefits-of-remote-redis" class="tsd-anchor-link">Benefits of Remote Redis<a href="#benefits-of-remote-redis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>Distributed Workers - Workers can run anywhere (different machines, cloud services) and all connect to the same Redis queue</li>
<li>Scalability - Scale horizontally by adding more workers without coordination</li>
<li>Persistence - Redis persists job queue; if workers restart, jobs aren't lost</li>
<li>Managed Services - Use Redis Cloud, AWS ElastiCache, or similar managed services</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#daft-declarative-agents-fast--type-safe"><span>DAFT -<wbr/> <wbr/>Declarative <wbr/>Agents, <wbr/>Fast &amp; <wbr/>Type-<wbr/>safe</span></a><a href="#daft-declarative-agents-fast--type-safe-1"><span>DAFT – <wbr/>Declarative <wbr/>Agents, <wbr/>Fast &amp; <wbr/>Type-<wbr/>safe</span></a><ul><li><ul><li><a href="#run-your-first-spec"><span>Run <wbr/>Your <wbr/>First <wbr/>Spec</span></a></li></ul></li><li><a href="#concepts"><span>Concepts</span></a></li><li><ul><li><a href="#iterative-data-enrichment"><span>Iterative <wbr/>Data <wbr/>Enrichment</span></a></li><li><a href="#examples-overview"><span>Examples <wbr/>Overview</span></a></li><li><a href="#specs"><span>Specs</span></a></li><li><a href="#predicates"><span>Predicates</span></a></li><li><a href="#tools"><span>Tools</span></a></li><li><a href="#dag-execution"><span>DAG <wbr/>Execution</span></a></li></ul></li><li><a href="#built-in-predicates"><span>Built-<wbr/>in <wbr/>Predicates</span></a></li><li><a href="#built-in-tools"><span>Built-<wbr/>in <wbr/>Tools</span></a></li><li><a href="#cli-commands"><span>CLI <wbr/>Commands</span></a></li><li><ul><li><a href="#quick-test"><span>Quick <wbr/>Test</span></a></li><li><a href="#submit-to-redis-distributed"><span>Submit to <wbr/>Redis (distributed)</span></a></li></ul></li><li><a href="#adding-custom-predicates-tools"><span>Adding <wbr/>Custom <wbr/>Predicates &amp; <wbr/>Tools</span></a></li><li><ul><li><a href="#add-predicate-10-lines"><span>Add <wbr/>Predicate (&lt; 10 lines)</span></a></li><li><a href="#add-tool-10-lines"><span>Add <wbr/>Tool (&lt; 10 lines)</span></a></li></ul></li><li><a href="#spec-examples"><span>Spec <wbr/>Examples</span></a></li><li><ul><li><a href="#linear-workflow"><span>Linear <wbr/>Workflow</span></a></li><li><a href="#dag-workflow-parallelism"><span>DAG <wbr/>Workflow (parallelism)</span></a></li><li><a href="#with-budget"><span>With <wbr/>Budget</span></a></li></ul></li><li><a href="#architecture"><span>Architecture</span></a></li><li><a href="#file-structure"><span>File <wbr/>Structure</span></a></li><li><a href="#limitations-v1"><span>Limitations (v1)</span></a></li><li><a href="#remote-redis-coordination"><span>Remote <wbr/>Redis <wbr/>Coordination</span></a></li></ul><a href="#or-with-authentication"><span>Or with authentication</span></a><a href="#or-with-tls"><span>Or with <wbr/>TLS</span></a><ul><li><a href="#benefits-of-remote-redis"><span>Benefits of <wbr/>Remote <wbr/>Redis</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">DAFT - v1.0.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
